"use strict";var hungitUploadFile={Init:function(){hungitUploadFile.GetImgLib();hungitUploadFile.RegisterEvent()},RegisterEvent:function(){$(".selectImg").dblclick(function(n){n.preventDefault();var t=$(this).attr("src");$("#txtImage").val(t);$("#EditImage").val(t);$("#EditImg").attr("src",t);$("#uploadFileModal").modal("hide")});$(".UploadModal").off("click").on("click",function(){hungitUploadFile.GetImgLib();$("#uploadFileModal").modal("show")});$(".remove").off("click").on("click",function(){var n=$(this).data("html");hungitUploadFile.removeImg(n)});$("#btn-search").off("click").on("click",function(){var n=$(".txtSearch").val();hungitUploadFile.GetImgLib(n)});$("#search-remove").on("click",function(){$(".txtSearch").val("");hungitUploadFile.GetImgLib()});$("#sort-bydate").on("click",function(){hungitUploadFile.GetImgLib("",!1)});$("#btn-upload").off("click").on("click",function(){hungitUploadFile.uploadImage()})},uploadImage:function(){var n=new FormData;n.append("file",$("#txtFileUpload")[0].files[0]);$.ajax({url:"/admin/UploadFileManager/UploadImage",data:n,type:"post",dataType:"json",processData:!1,contentType:!1,success:function(n){n.status&&(toastr.success("Upload file thành công"),hungitUploadFile.GetImgLib())}})},removeImg:function(n){$.ajax({url:"/admin/UploadFileManager/RemoveFileImage",data:{path:n},type:"post",dataType:"json",success:function(n){n.status?(toastr.success("Xóa ảnh thành công!"),hungitUploadFile.GetImgLib()):toastr.error("Không có ảnh được tìm thấy!")}})},GetImgLib:function(n,t){$.ajax({url:"/admin/UploadFileManager/GetImgLib",type:"get",data:{filter:n,sort:t},dataType:"json",success:function(n){var r=n.data,u=n.count,f=n.capacity,t,i;$("#capacity").html(f);$("#count").html(u);t="";i=$("#template-img").html();$.each(r,function(n,r){t+=Mustache.render(i,{Id:n,image:r})});$(".img-frame").html(t);hungitUploadFile.RegisterEvent()}})}};hungitUploadFile.Init();